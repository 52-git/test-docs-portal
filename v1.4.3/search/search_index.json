{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Test Docs Portal","text":"<p>This site is built with MkDocs (Material theme) and supports selectable legacy versions.</p>"},{"location":"#repositories","title":"repositories","text":"<ul> <li>Frontend</li> <li>Backend</li> <li>Infra(Todo)</li> </ul>"},{"location":"#how-versioning-works","title":"How versioning works","text":"<ul> <li>Each released documentation snapshot is stored as a Git tag (for example: <code>v1.1</code>, <code>v1.2</code>, <code>v1.3</code>).</li> <li>The site is published with mike, which deploys each tag into a dedicated path on the <code>docs-dist</code> branch.</li> <li>The Material theme reads the version list from mike and renders a version selector automatically.</li> </ul> <p>Tip: Use <code>mike serve</code> locally to preview multiple versions (requires tags).</p>"},{"location":"backend/","title":"unx-knowledge-backend","text":""},{"location":"backend/#_1","title":"\u6982\u8981","text":"<p>\u4f01\u696d\u5185\u30ca\u30ec\u30c3\u30b8\u691c\u7d22\u3068\u5bfe\u8a71\u3092\u63d0\u4f9b\u3059\u308b\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3067\u3059\u3002FastAPI + Socket.IO \u3092\u4e2d\u5fc3\u306b\u3001DynamoDB/FAISS/S3/BEDROCK \u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u30ca\u30ec\u30c3\u30b8\u306e\u53d6\u308a\u8fbc\u307f\u3001\u30d9\u30af\u30c8\u30eb\u691c\u7d22\u3001\u56de\u7b54\u751f\u6210\u3001\u7d99\u7d9a\u56de\u7b54\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"backend/#_2","title":"\u4e3b\u8981\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8","text":"<ul> <li>FastAPI: REST API \u3068\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u3002</li> <li>Socket.IO: \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u56de\u7b54\u3001\u7d99\u7d9a\u56de\u7b54\u30a4\u30d9\u30f3\u30c8\u3002</li> <li>DynamoDB: \u30ca\u30ec\u30c3\u30b8\u30fb\u8a2d\u5b9a\u30fb\u30e6\u30fc\u30b6\u30fc\u30fb\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u30fb\u30b8\u30e7\u30d6\u7ba1\u7406\u3002</li> <li>S3: \u53d6\u308a\u8fbc\u307f\u30ca\u30ec\u30c3\u30b8\u306e\u683c\u7d0d\u3001\u30e6\u30fc\u30b6\u30fc\u5199\u771f\u306e\u4fdd\u5b58\u3002</li> <li>FAISS: \u57cb\u3081\u8fbc\u307f\u691c\u7d22\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u69cb\u7bc9\u3002</li> <li>Bedrock: \u57cb\u3081\u8fbc\u307f\u751f\u6210\uff08Titan Embed\uff09\u3002</li> <li>LLM: OpenAI / Anthropic Claude / Google Gemini \u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u5229\u7528\u3002</li> <li>APScheduler + DDB: \u30b8\u30e7\u30d6\u5b9a\u7fa9\u306b\u57fa\u3065\u304f\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u5b9f\u884c\u3002</li> </ul>"},{"location":"backend/#_3","title":"\u4e3b\u8981\u6a5f\u80fd","text":"<ul> <li>\u30c1\u30e3\u30c3\u30c8\u56de\u7b54\uff08Socket.IO\uff09: \u90e8\u7f72\u30fb\u30ec\u30d9\u30eb\u5225\u30ca\u30ec\u30c3\u30b8\u691c\u7d22\u3001\u53c2\u7167\u30ea\u30f3\u30af\u3001\u7d99\u7d9a\u56de\u7b54\u3002</li> <li>Teams Bot \u9023\u643a: Adaptive Card \u3067\u306e\u56de\u7b54\u3001\u7d9a\u304d\u30dc\u30bf\u30f3\u3002</li> <li>\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af: \u30ea\u30a2\u30af\u30b7\u30e7\u30f3/\u30b3\u30e1\u30f3\u30c8/\u7d99\u7d9a\u56de\u7b54\u306e\u4fdd\u5b58\u3002</li> <li>\u7ba1\u7406 CRUD: \u90e8\u7f72\u3001\u7ba1\u7406\u8005\u3001\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u3001\u56de\u7b54\u30a8\u30ea\u30a2\u3001\u5916\u90e8\u63a5\u7d9a\u3001\u30ca\u30ec\u30c3\u30b8\u30bd\u30fc\u30b9\u3002</li> <li>\u53d6\u308a\u8fbc\u307f\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3: \u5916\u90e8\u30bd\u30fc\u30b9\u3092 S3 \u306b\u540c\u671f \u2192 \u57cb\u3081\u8fbc\u307f\u751f\u6210 \u2192 DynamoDB \u3078\u767b\u9332\u3002</li> <li>Microsoft Graph \u9023\u643a: \u793e\u54e1\u60c5\u5831\u3068\u5199\u771f\u306e\u540c\u671f\u3002</li> <li>DDB \u30b9\u30b1\u30b8\u30e5\u30fc\u30e9: \u53d6\u308a\u8fbc\u307f/\u57cb\u3081\u8fbc\u307f/\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u518d\u8aad\u8fbc\u3092\u5b9a\u671f\u5b9f\u884c\u3002</li> </ul>"},{"location":"backend/#_4","title":"\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\uff08\u6982\u8981\uff09","text":"<ol> <li><code>services/import_to_s3.py</code> \u304c\u5916\u90e8\u30bd\u30fc\u30b9\u3092\u53d6\u5f97\u3057 S3 + DATA_TABLE \u3092\u66f4\u65b0\u3002</li> <li><code>services/s3_to_dynamodb.py</code> \u304c S3 \u3092\u8d70\u67fb\u3057\u3066\u57cb\u3081\u8fbc\u307f\u3092\u4f5c\u6210\u3057 EMBEDDING_TABLE \u3078\u767b\u9332\u3002</li> <li><code>repositories/knowledge_index.py</code> \u304c EMBEDDING_TABLE \u3092\u8aad\u307f\u8fbc\u307f FAISS \u3092\u69cb\u7bc9\u3002</li> <li>Socket.IO \u3067 <code>chat</code> \u2192 \u30d9\u30af\u30c8\u30eb\u691c\u7d22 \u2192 LLM \u751f\u6210 \u2192 <code>partial</code>/<code>done</code> \u3092\u9001\u4fe1\u3002</li> <li>\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af/\u7d99\u7d9a\u60c5\u5831\u3092 FEEDBACK_TABLE / CHAT_CONTINUATION_TABLE \u306b\u4fdd\u5b58\u3002</li> </ol>"},{"location":"backend/#_5","title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<ul> <li><code>app/main.py</code>: FastAPI + Socket.IO \u30a8\u30f3\u30c8\u30ea\u3002\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3067\u5404\u7a2e\u30ab\u30bf\u30ed\u30b0/\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u521d\u671f\u5316\u3002</li> <li><code>app/api/</code>: REST API\uff08\u7ba1\u7406\u7cfb CRUD\u3001\u30e6\u30fc\u30b6\u30fc\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\uff09\u3002</li> <li><code>app/integrations/</code>: \u30c1\u30e3\u30c3\u30c8\u9023\u643a\uff08Socket.IO/Teams\uff09\u3068 LLM \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3002</li> <li><code>app/services/</code>: \u53d6\u308a\u8fbc\u307f\u30fb\u57cb\u3081\u8fbc\u307f\u30fb\u30e6\u30fc\u30b6\u30fc\u540c\u671f\u3002</li> <li><code>app/repositories/</code>: FAISS \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3001DDB \u30ab\u30bf\u30ed\u30b0/\u30b9\u30c8\u30a2\u3002</li> <li><code>app/tasks/</code>: DDB \u99c6\u52d5\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u3002</li> <li><code>app/utils/</code>: \u5171\u6709\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3002</li> </ul>"},{"location":"backend/#readme","title":"README \u7d22\u5f15","text":"<ul> <li><code>app/README.md</code>: \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u5168\u4f53\u306e\u69cb\u6210\u3068\u5f79\u5272\u3002</li> <li><code>app/api/README.md</code>: REST API \u306e\u4ed5\u69d8\u3068\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u6982\u8981\u3002</li> <li><code>app/integrations/README.md</code>: \u30c1\u30e3\u30c3\u30c8/LLM \u9023\u643a\u306e\u5b9f\u88c5\u6982\u8981\u3002</li> <li><code>app/repositories/README.md</code>: \u691c\u7d22\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3068 DDB \u30ea\u30dd\u30b8\u30c8\u30ea\u3002</li> <li><code>app/services/README.md</code>: \u53d6\u308a\u8fbc\u307f\u30fb\u57cb\u3081\u8fbc\u307f\u30fb\u30e6\u30fc\u30b6\u30fc\u540c\u671f\u306e\u8a73\u7d30\u3002</li> <li><code>app/tasks/README.md</code>: DDB \u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u306e\u4ed5\u7d44\u307f\u3002</li> </ul>"},{"location":"backend/#api","title":"API \u6982\u8981","text":""},{"location":"backend/#_6","title":"\u57fa\u672c","text":"<ul> <li><code>GET /healthz</code>: \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u3002</li> <li><code>GET /departments</code>: \u30c1\u30e3\u30c3\u30c8\u3067\u4f7f\u3046\u90e8\u7f72\u4e00\u89a7\uff08SOURCE_CONFIG_TABLE \u306e <code>folder</code> \u7531\u6765\uff09\u3002</li> <li><code>GET /models</code>: \u5229\u7528\u53ef\u80fd\u30e2\u30c7\u30eb\u4e00\u89a7\u3002</li> </ul>"},{"location":"backend/#_7","title":"\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af/\u7d99\u7d9a","text":"<ul> <li><code>POST /api/feedback/reaction</code>: \u3044\u3044\u306d/\u30d0\u30c3\u30c9\u66f4\u65b0\u3002</li> <li><code>POST /api/feedback/comment</code>: \u30b3\u30e1\u30f3\u30c8\u8ffd\u52a0\u3002</li> <li><code>POST /api/feedback/continue</code>: \u7d99\u7d9a\u56de\u7b54\uff08HTTP \u7248\uff09\u3002</li> </ul>"},{"location":"backend/#_8","title":"\u30d0\u30c3\u30c1/\u904b\u7528","text":"<ul> <li><code>POST /api/import_to_s3</code>: \u5916\u90e8\u30bd\u30fc\u30b9\u540c\u671f\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u5b9f\u884c\u3002</li> <li><code>POST /api/s3_to_dynamodb</code>: \u57cb\u3081\u8fbc\u307f\u751f\u6210\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u5b9f\u884c\u3002</li> </ul>"},{"location":"backend/#teams-bot","title":"Teams Bot","text":"<ul> <li><code>POST /api/azure_chatbot</code>: Bot Framework \u4e92\u63db\u306e webhook\u3002</li> </ul>"},{"location":"backend/#restapiv1","title":"REST\uff08<code>/api/v1</code>\uff09","text":"<ul> <li><code>admins</code>: \u7ba1\u7406\u8005 CRUD\u3002</li> <li><code>departments</code>: \u90e8\u7f72 CRUD\uff08DEPARTMENT_TABLE_NAME\uff09\u3002</li> <li><code>answer-areas</code>: \u56de\u7b54\u8868\u793a\u30a8\u30ea\u30a2 CRUD\u3002</li> <li><code>external-services</code>: \u5916\u90e8\u30b5\u30fc\u30d3\u30b9 CRUD\u3002</li> <li><code>ext-resources</code>: \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u30ea\u30bd\u30fc\u30b9 CRUD\u3002</li> <li><code>ext-connections</code>: \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u63a5\u7d9a CRUD\uff08<code>/ext-connections/test</code> \u3067\u63a5\u7d9a\u30c6\u30b9\u30c8\uff09\u3002</li> <li><code>knowledge-sources</code>: \u30ca\u30ec\u30c3\u30b8\u30bd\u30fc\u30b9 CRUD\u3002</li> <li><code>users</code>: \u4e00\u89a7/\u8a73\u7d30/\u540c\u671f/\u7d71\u8a08/\u5199\u771f\u3002</li> <li><code>secrets</code>: Secrets Manager \u306e CRUD\u3002</li> </ul> <p>\u203b <code>GET</code> \u4e00\u89a7 API \u306f <code>_page</code>/<code>_limit</code>/<code>_sort</code>/<code>_order</code> \u3092\u53d7\u3051\u53d6\u308a\u3001<code>X-Total-Count</code> \u3092\u8fd4\u3057\u307e\u3059\u3002</p>"},{"location":"backend/#socketio","title":"Socket.IO \u30a4\u30d9\u30f3\u30c8","text":"<ul> <li><code>chat</code>: <code>{ query, dept, model }</code> \u3092\u9001\u4fe1\u3059\u308b\u3068 <code>partial</code> \u2192 <code>done</code> \u3092\u53d7\u4fe1\u3002</li> <li><code>continue</code>: <code>{ feedback_id, level_key, cursor }</code> \u3067\u7d99\u7d9a\u56de\u7b54\u3002</li> </ul>"},{"location":"backend/#_9","title":"\u74b0\u5883\u5909\u6570\uff08\u4e3b\u8981\uff09","text":""},{"location":"backend/#_10","title":"\u30b3\u30a2","text":"<ul> <li><code>AWS_REGION</code></li> <li><code>DEFAULT_AI_MODEL</code></li> <li><code>SUPPORTED_AI_MODELS</code></li> <li><code>MAX_COMPLETION_TOKENS</code></li> <li><code>CORS_ALLOWED_ORIGINS</code></li> <li><code>CORS_SUPPORTS_CREDENTIALS</code></li> <li><code>CORS_EXPOSE_HEADERS</code></li> </ul>"},{"location":"backend/#dynamodb","title":"DynamoDB \u30c6\u30fc\u30d6\u30eb","text":"<ul> <li><code>SOURCE_CONFIG_TABLE</code>, <code>LEVEL_TABLE</code>, <code>DYNAMO_TABLE_NAME</code>, <code>IMPROVEMENT_TABLE_NAME</code></li> <li><code>FEEDBACK_TABLE_NAME</code>, <code>CHAT_CONTINUATION_TABLE_NAME</code></li> <li><code>DEPARTMENT_TABLE_NAME</code>, <code>ADMIN_TABLE_NAME</code>, <code>ANSWER_AREA_TABLE_NAME</code></li> <li><code>EXTERNAL_SERVICE_TABLE_NAME</code>, <code>EXT_RESOURCE_TABLE_NAME</code>, <code>EXT_CONNECTION_TABLE_NAME</code></li> <li><code>KNOWLEDGE_SOURCE_TABLE_NAME</code>, <code>USER_TABLE_NAME</code></li> <li><code>DATA_TABLE</code>, <code>TAG_TABLE</code>, <code>EMBEDDING_TABLE</code>, <code>JOBS_TABLE</code></li> </ul>"},{"location":"backend/#s3","title":"S3","text":"<ul> <li><code>S3_BUCKET</code></li> <li><code>USER_PHOTO_S3_BUCKET</code></li> </ul>"},{"location":"backend/#import_to_s3","title":"\u53d6\u308a\u8fbc\u307f\uff08import_to_s3\uff09","text":"<ul> <li><code>LOG_LEVEL</code>, <code>GITHUB_TOKEN</code>, <code>BACKLOG_SPACE</code>, <code>BACKLOG_API_KEY</code></li> </ul>"},{"location":"backend/#s3_to_dynamodb","title":"\u57cb\u3081\u8fbc\u307f\uff08s3_to_dynamodb\uff09","text":"<ul> <li><code>MODEL_NAME</code>, <code>CH_MAX</code>, <code>CH_MIN</code>, <code>SENT_OVERLAP</code></li> <li><code>MICRO_WINDOW</code>, <code>MICRO_STRIDE</code></li> <li><code>MAX_FILE_MB</code>, <code>MAX_WORKERS</code>, <code>MAX_INFLIGHT</code>, <code>SPOOL_THRESHOLD_MB</code>, <code>MAX_CHUNKS_PER_DOC</code></li> </ul>"},{"location":"backend/#llm-api","title":"LLM API","text":"<ul> <li><code>OPENAI_API_KEY</code>, <code>CLAUDE_API_KEY</code>, <code>GEMINI_API_KEY</code></li> </ul>"},{"location":"backend/#_11","title":"\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9","text":"<ul> <li><code>ENABLE_DDB_SCHEDULER</code>, <code>DEFAULT_TZ</code>, <code>RELOAD_INTERVAL_SEC</code>, <code>LEASE_TTL_SEC</code></li> <li><code>APS_MAX_WORKERS</code>, <code>EMBED_DEFAULT_WORKERS</code>, <code>SCHEDULER_ID</code></li> <li><code>ENABLE_JOB_POOL</code>, <code>JOB_MAX_WORKERS</code></li> </ul>"},{"location":"backend/#microsoft-graph-bot","title":"Microsoft Graph / Bot","text":"<ul> <li><code>TENANT_ID</code>, <code>BOT_APP_ID</code>, <code>BOT_APP_PASSWORD</code></li> </ul>"},{"location":"backend/#knowledgeindex","title":"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u69cb\u7bc9\uff08KnowledgeIndex\uff09","text":"<ul> <li><code>KI_BUILD_BATCH</code>, <code>KI_LOG_EVERY</code></li> </ul>"},{"location":"backend/#_12","title":"\u30ed\u30fc\u30ab\u30eb\u8d77\u52d5","text":"<pre><code>python -m venv .venv\n. .venv/bin/activate  # Windows: .venv\\\\Scripts\\\\activate\npip install -r requirements.txt\n\n# .env \u3092\u7528\u610f\u3057\u305f\u3046\u3048\u3067\nuvicorn app.main:app --host 0.0.0.0 --port 8080 --reload\n</code></pre>"},{"location":"backend/#docker","title":"Docker","text":"<pre><code>docker build -t knowledge-service:latest .\ndocker run --rm -p 8080:8080 knowledge-service:latest\n</code></pre>"},{"location":"backend/#ecr-push","title":"ECR \u3078\u306e push\uff08\u4f8b\uff09","text":"<pre><code>aws ecr get-login-password --region ap-northeast-1 | docker login --username AWS --password-stdin 034362039295.dkr.ecr.ap-northeast-1.amazonaws.com\ndocker build -t knowledge-service:latest .\ndocker tag knowledge-service:latest 034362039295.dkr.ecr.ap-northeast-1.amazonaws.com/knowledge-service:latest\ndocker push 034362039295.dkr.ecr.ap-northeast-1.amazonaws.com/knowledge-service:latest\n</code></pre>"},{"location":"backend/api/","title":"app/api/","text":""},{"location":"backend/api/#_1","title":"\u6982\u8981","text":"<p>FastAPI \u306e REST API \u5b9f\u88c5\u3067\u3059\u3002<code>/api</code> \u914d\u4e0b\u306b v1 \u30eb\u30fc\u30bf\u3092\u96c6\u7d04\u3057\u3001\u7ba1\u7406\u753b\u9762\u5411\u3051\u306e CRUD \u3068\u904b\u7528\u7cfb API \u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"backend/api/#_2","title":"\u5171\u901a\u4ed5\u69d8","text":"<ul> <li>\u4e00\u89a7\u53d6\u5f97\u306f <code>_page</code> / <code>_limit</code> / <code>_sort</code> / <code>_order</code> \u3092\u53d7\u3051\u53d6\u308a\u3001<code>X-Total-Count</code> \u30d8\u30c3\u30c0\u3067\u7dcf\u4ef6\u6570\u3092\u8fd4\u3057\u307e\u3059\u3002</li> <li><code>isActive</code> \u306e\u3088\u3046\u306a\u771f\u507d\u5024\u306f <code>true/false</code>, <code>1/0</code> \u3092\u8a31\u5bb9\u3059\u308b\u5909\u63db\u3092\u884c\u3044\u307e\u3059\u3002</li> <li>ID \u672a\u6307\u5b9a\u306e\u5834\u5408\u306f\u30c6\u30fc\u30d6\u30eb\u5185\u5bb9\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u3066\u9023\u756a ID \u3092\u751f\u6210\u3057\u307e\u3059\uff08\u4f8b: <code>dept001</code>\uff09\u3002</li> </ul>"},{"location":"backend/api/#_3","title":"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u4e00\u89a7\uff08\u629c\u7c8b\uff09","text":""},{"location":"backend/api/#crud","title":"\u7ba1\u7406\u7cfb CRUD","text":"<ul> <li><code>admins</code>: \u7ba1\u7406\u8005\u30c6\u30fc\u30d6\u30eb\uff08<code>ADMIN_TABLE_NAME</code>\uff09\u3002</li> <li>ID \u4f8b: <code>admin001</code></li> <li><code>departments</code>: \u90e8\u7f72\u30c6\u30fc\u30d6\u30eb\uff08<code>DEPARTMENT_TABLE_NAME</code>\uff09\u3002</li> <li>ID \u4f8b: <code>dept001</code></li> <li><code>answer-areas</code>: \u56de\u7b54\u8868\u793a\u30a8\u30ea\u30a2\uff08<code>ANSWER_AREA_TABLE_NAME</code>\uff09\u3002</li> <li>ID \u4f8b: <code>AD001</code></li> <li><code>external-services</code>: \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\uff08<code>EXTERNAL_SERVICE_TABLE_NAME</code>\uff09\u3002</li> <li>ID \u4f8b: <code>ES001</code></li> <li><code>ext-resources</code>: \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u306e\u30ea\u30bd\u30fc\u30b9\uff08<code>EXT_RESOURCE_TABLE_NAME</code>\uff09\u3002</li> <li>ID \u4f8b: <code>ER001</code></li> <li><code>ext-connections</code>: \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u63a5\u7d9a\uff08<code>EXT_CONNECTION_TABLE_NAME</code>\uff09\u3002</li> <li>ID \u4f8b: <code>EC001</code></li> <li><code>POST /ext-connections/test</code> \u3067 API \u30ad\u30fc\u63a5\u7d9a\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3002</li> <li><code>knowledge-sources</code>: \u30ca\u30ec\u30c3\u30b8\u30bd\u30fc\u30b9\uff08<code>KNOWLEDGE_SOURCE_TABLE_NAME</code>\uff09\u3002</li> <li>ID \u4f8b: <code>KS001</code></li> </ul>"},{"location":"backend/api/#_4","title":"\u30e6\u30fc\u30b6\u30fc","text":"<ul> <li><code>GET /api/users</code>: \u4e00\u89a7\u53d6\u5f97\uff08<code>department</code> \u30d5\u30a3\u30eb\u30bf\u5bfe\u5fdc\uff09\u3002</li> <li><code>GET /api/users/{user_id}</code>: \u8a73\u7d30\u3002</li> <li><code>GET /api/users/email/{email}</code>: \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u691c\u7d22\u3002</li> <li><code>POST /api/users/sync</code>: Microsoft Graph \u304b\u3089\u5168\u91cf\u540c\u671f\u3002</li> <li><code>POST /api/users/sync/{user_id}</code>: \u5358\u4e00\u30e6\u30fc\u30b6\u30fc\u540c\u671f\u3002</li> <li><code>GET /api/users/stats</code>: \u540c\u671f\u7d71\u8a08\u3002</li> <li><code>GET /api/users/{user_id}/photo</code>: \u5199\u771f URL \u306e\u53d6\u5f97\u3002</li> <li><code>GET /api/users/{user_id}/photo/raw</code>: S3 \u304b\u3089\u753b\u50cf\u30d0\u30a4\u30ca\u30ea\u3092\u8fd4\u5374\u3002</li> </ul>"},{"location":"backend/api/#secrets","title":"Secrets","text":"<ul> <li><code>GET /api/secrets</code>: Secrets Manager \u4e00\u89a7\u3002</li> <li><code>GET /api/secrets/{secret_id}</code>: \u53d6\u5f97\u3002</li> <li><code>POST /api/secrets</code>: \u4f5c\u6210\u3002</li> <li><code>PUT /api/secrets/{secret_id}</code>: \u66f4\u65b0\u3002</li> <li><code>DELETE /api/secrets/{secret_id}</code>: \u524a\u9664\uff08<code>force</code>/<code>recovery_days</code> \u5bfe\u5fdc\uff09\u3002</li> </ul>"},{"location":"backend/api/#_5","title":"\u30eb\u30fc\u30bf\u69cb\u6210","text":"<p><code>app/api/v1/router.py</code> \u304c\u5404\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092 <code>/api</code> \u914d\u4e0b\u306b\u7d71\u5408\u3057\u307e\u3059\u3002</p>"},{"location":"backend/architecture/","title":"app/","text":""},{"location":"backend/architecture/#_1","title":"\u5f79\u5272","text":"<p>\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u672c\u4f53\u306e\u5b9f\u88c5\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u3059\u3002FastAPI \u3068 Socket.IO \u3092\u4e2d\u5fc3\u306b\u3001\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u9023\u643a\u3084\u30ca\u30ec\u30c3\u30b8\u691c\u7d22\u3001\u30d0\u30c3\u30c1\u51e6\u7406\u3092\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"backend/architecture/#_2","title":"\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8","text":"<ul> <li><code>main.py</code>: FastAPI \u3068 Socket.IO \u306e ASGI \u30a2\u30d7\u30ea\u3092\u69cb\u7bc9\u3002\u8d77\u52d5\u6642\u306b DynamoDB \u30c6\u30fc\u30d6\u30eb/\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"backend/architecture/#_3","title":"\u30b5\u30d6\u30d1\u30c3\u30b1\u30fc\u30b8\u6982\u8981","text":"<ul> <li><code>api/</code>: \u7ba1\u7406\u7cfb CRUD \u3068\u30e6\u30fc\u30b6\u30fc/\u30b7\u30fc\u30af\u30ec\u30c3\u30c8 API \u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3002</li> <li><code>core/</code>: \u8a2d\u5b9a\uff08\u74b0\u5883\u5909\u6570\uff09\u3068\u30ed\u30b0\u8a2d\u5b9a\u3002</li> <li><code>integrations/</code>: Chat \u9023\u643a\uff08Socket.IO / Teams\uff09\u3068 LLM \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u7fa4\u3002</li> <li><code>repositories/</code>: FAISS \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3001DynamoDB \u30ab\u30bf\u30ed\u30b0/\u30b9\u30c8\u30a2\u3001\u7d99\u7d9a\u56de\u7b54\u30b9\u30c8\u30ec\u30fc\u30b8\u3002</li> <li><code>services/</code>: \u53d6\u308a\u8fbc\u307f\u30fb\u57cb\u3081\u8fbc\u307f\u751f\u6210\u30fbMicrosoft Graph \u540c\u671f\u306a\u3069\u306e\u30d0\u30c3\u30c1\u3002</li> <li><code>tasks/</code>: DDB \u99c6\u52d5\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\uff08APScheduler\uff09\u3002</li> <li><code>utils/</code>: \u5171\u6709\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\uff08Secrets Manager\u3001\u30e2\u30c7\u30eb\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306a\u3069\uff09\u3002</li> <li><code>schemas/</code>: \u30b9\u30ad\u30fc\u30de\u7f6e\u304d\u5834\uff08\u73fe\u72b6\u306f\u7a7a\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\uff09\u3002</li> </ul>"},{"location":"backend/architecture/#_4","title":"\u88dc\u8db3","text":"<p>Socket.IO \u304c\u5fc5\u8981\u306a\u3044\u30b1\u30fc\u30b9\u3067\u306f <code>main.py</code> \u306e <code>fastapi_app</code> \u3092\u53c2\u7167\u3059\u308b\u3068\u3001\u7d14\u7c8b\u306aFastAPI \u3068\u3057\u3066\u6271\u3048\u307e\u3059\u3002</p>"},{"location":"backend/integrations/","title":"app/integrations/","text":""},{"location":"backend/integrations/#_1","title":"\u6982\u8981","text":"<p>\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u3084 LLM \u3068\u306e\u7d71\u5408\u30ec\u30a4\u30e4\u3067\u3059\u3002\u30c1\u30e3\u30c3\u30c8\u5165\u529b\u3092\u53d7\u3051\u3066\u30d7\u30ed\u30f3\u30d7\u30c8\u69cb\u7bc9 \u2192 \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u56de\u7b54 \u2192 \u53c2\u7167/\u7d99\u7d9a\u60c5\u5831\u3092\u6271\u3044\u307e\u3059\u3002</p>"},{"location":"backend/integrations/#chat","title":"chat/","text":"<ul> <li><code>socketio.py</code>: Web \u5411\u3051 Socket.IO \u5b9f\u88c5\u3002</li> <li><code>chat</code> \u30a4\u30d9\u30f3\u30c8\u3067\u57cb\u3081\u8fbc\u307f\u691c\u7d22 \u2192 \u30ec\u30d9\u30eb\u5225\u56de\u7b54\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u914d\u4fe1\u3002</li> <li>\u56de\u7b54\u672b\u5c3e\u3092\u3082\u3068\u306b\u7d99\u7d9a\u30ab\u30fc\u30bd\u30eb\u3092\u751f\u6210\u3057\u3001\u7d99\u7d9a\u7528\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3002</li> <li><code>teams.py</code>: Microsoft Teams (Bot Framework) \u9023\u643a\u3002</li> <li>Adaptive Card \u3067\u8907\u6570\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u8868\u793a\u3002</li> <li>\u300c\u7d9a\u304d\u300d\u30dc\u30bf\u30f3\u3067\u7d99\u7d9a\u56de\u7b54\u3092\u5b9f\u884c\u3002</li> <li>\u30e6\u30fc\u30b6\u30fc\u9078\u629e\u306e\u90e8\u7f72/\u30e2\u30c7\u30eb\u3092\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u6301\u3002</li> <li><code>common.py</code>: \u53c2\u7167\u8868\u793a\u3084\u7d99\u7d9a\u5224\u5b9a\u3001DONE \u30de\u30fc\u30ab\u30fc\u306a\u3069\u306e\u5171\u901a\u51e6\u7406\u3002</li> <li><code>ws.py</code>: \u65e7\u6765\u306e WebSocket \u5b9f\u88c5\uff08\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u62e1\u5f35\uff09\u3002</li> </ul>"},{"location":"backend/integrations/#llm","title":"llm/","text":"<ul> <li><code>prompt_builder.py</code>: \u30ca\u30ec\u30c3\u30b8\u691c\u7d22\u7d50\u679c\u304b\u3089\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u69cb\u7bc9\u3002</li> <li><code>models.py</code>: <code>SUPPORTED_AI_MODELS</code>/<code>DEFAULT_AI_MODEL</code> \u306e\u6b63\u898f\u5316\u3002</li> <li><code>gpt_client.py</code>: OpenAI GPT \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3002</li> <li><code>claude_client.py</code>: Anthropic Claude \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3002</li> <li><code>gemini_client.py</code>: Google Gemini \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3002</li> <li><code>bedrock_client.py</code>: Bedrock \u3067\u57cb\u3081\u8fbc\u307f\u751f\u6210\uff08Titan Embed\uff09\u3002</li> </ul>"},{"location":"backend/integrations/#_2","title":"\u5229\u7528\u3059\u308b\u74b0\u5883\u5909\u6570\uff08\u4e3b\uff09","text":"<ul> <li><code>SUPPORTED_AI_MODELS</code>, <code>DEFAULT_AI_MODEL</code>, <code>MAX_COMPLETION_TOKENS</code></li> <li><code>OPENAI_API_KEY</code>, <code>CLAUDE_API_KEY</code>, <code>GEMINI_API_KEY</code></li> <li><code>AWS_REGION</code>\uff08Bedrock / DDB / S3\uff09</li> </ul>"},{"location":"backend/repositories/","title":"app/repositories/","text":""},{"location":"backend/repositories/#_1","title":"\u6982\u8981","text":"<p>\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u3068\u691c\u7d22\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002DynamoDB \u304b\u3089\u306e\u8aad\u307f\u8fbc\u307f\u3092\u6700\u5c0f\u5316\u3059\u308b\u305f\u3081\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3084 FAISS \u3092\u6d3b\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"backend/repositories/#_2","title":"\u4e3b\u306a\u30ea\u30dd\u30b8\u30c8\u30ea","text":"<ul> <li><code>knowledge_index.py</code></li> <li>DynamoDB \u306e\u57cb\u3081\u8fbc\u307f\u30c6\u30fc\u30d6\u30eb\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u8d70\u67fb\u3057 FAISS \u3092\u69cb\u7bc9\u3002</li> <li><code>search_with_text</code> \u3067\u30d9\u30af\u30c8\u30eb\u691c\u7d22 + \u30c6\u30ad\u30b9\u30c8\u53d6\u5f97\u3002</li> <li><code>query_by_vector</code> \u306f\u65e7\u4ed5\u69d8\u4e92\u63db\u306e\u691c\u7d22\u30e9\u30c3\u30d1\u3002</li> <li><code>improvement_index.py</code></li> <li>\u6539\u5584\u7528\u306e\u57cb\u3081\u8fbc\u307f\u30c6\u30fc\u30d6\u30eb\u3092 FAISS \u5316\u3057\u3066\u691c\u7d22\u3002</li> <li><code>department_catalog.py</code></li> <li>\u90e8\u7f72\u4e00\u89a7\u3092 TTL \u4ed8\u304d\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u3002</li> <li><code>level_catalog.py</code></li> <li>\u30ec\u30d9\u30eb ID \u3068\u540d\u79f0\u3092\u53cc\u65b9\u5411\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3002</li> <li><code>user_catalog.py</code></li> <li>Microsoft Graph \u540c\u671f\u7528\u306e\u30e6\u30fc\u30b6\u30fc CRUD/\u96c6\u8a08\u3002</li> <li><code>continuation_store.py</code></li> <li>\u7d99\u7d9a\u56de\u7b54\u306e\u30ab\u30fc\u30bd\u30eb\u751f\u6210/\u4fdd\u5b58/\u524a\u9664\u3002</li> </ul>"},{"location":"backend/repositories/#_3","title":"\u4f7f\u3044\u65b9\u306e\u30dd\u30a4\u30f3\u30c8","text":"<ul> <li><code>KnowledgeIndex.start_background()</code> / <code>ImprovementIndex.start_background()</code> \u3092\u4f7f\u3044\u3001\u8d77\u52d5\u6642\u306b\u975e\u540c\u671f\u3067\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</li> <li><code>DepartmentCatalog</code>/<code>LevelCatalog</code> \u306f TTL \u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u305f\u3081\u3001\u5909\u66f4\u53cd\u6620\u306b\u306f <code>reload()</code> \u304c\u5fc5\u8981\u3067\u3059\u3002</li> </ul>"},{"location":"backend/services/","title":"app/services/","text":""},{"location":"backend/services/#_1","title":"\u6982\u8981","text":"<p>\u5916\u90e8\u30bd\u30fc\u30b9\u53d6\u308a\u8fbc\u307f\u3001\u57cb\u3081\u8fbc\u307f\u751f\u6210\u3001Microsoft Graph \u540c\u671f\u306a\u3069\u306e\u9577\u6642\u9593\u51e6\u7406\u3092\u307e\u3068\u3081\u305f\u30ec\u30a4\u30e4\u3067\u3059\u3002</p>"},{"location":"backend/services/#import_to_s3py","title":"import_to_s3.py","text":"<p><code>SyncOrchestrator</code> \u304c\u5916\u90e8\u30bd\u30fc\u30b9\u3092\u8d70\u67fb\u3057\u3001S3 \u3068 DATA_TABLE \u3092\u540c\u671f\u3057\u307e\u3059\u3002 - \u5bfe\u5fdc\u30bd\u30fc\u30b9: GitHub, Backlog\uff08Wiki/Issue/Document/Shared File\uff09, \u65e2\u5b58 S3\u3002 - <code>source</code> \u306f <code>type||key</code> \u5f62\u5f0f\u3067\u6307\u5b9a\u3002 - <code>file_type</code>, <code>excluded_keywords</code>, <code>tags</code> \u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3002 - <code>depts</code> \u3092\u8907\u6570\u90e8\u7f72\u3067\u4fdd\u6301\u3057\u3001\u524a\u9664\u6642\u306f\u90e8\u7f72\u5358\u4f4d\u3067 unlink\u3002</p>"},{"location":"backend/services/#s3_to_dynamodbpy","title":"s3_to_dynamodb.py","text":"<p><code>EmbedOrchestrator</code> \u304c S3 \u3092\u8aad\u307f\u8fbc\u307f\u3001\u57cb\u3081\u8fbc\u307f\u3092 EMBEDDING_TABLE \u306b\u767b\u9332\u3057\u307e\u3059\u3002 - \u5bfe\u5fdc\u5f62\u5f0f: PDF/DOCX/PPTX/XLSX/XLS/TXT/MD/DOC/PPT\u3002 - \u5927\u5bb9\u91cf\u5bfe\u7b56: \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u8aad\u307f\u8fbc\u307f\u3001\u30b9\u30d7\u30fc\u30eb\u3001\u30c1\u30e3\u30f3\u30af\u6570\u4e0a\u9650\u3002 - \u30c1\u30e3\u30f3\u30af\u306f <code>coarse</code> + <code>micro</code> \u3067\u691c\u7d22\u30ea\u30b3\u30fc\u30eb\u3092\u5411\u4e0a\u3002</p>"},{"location":"backend/services/#microsoft_user_syncpy","title":"microsoft_user_sync.py","text":"<p>Microsoft Graph API \u304b\u3089\u30e6\u30fc\u30b6\u30fc\u3092\u53d6\u5f97\u3057 <code>USER_TABLE_NAME</code> \u306b\u540c\u671f\u3057\u307e\u3059\u3002 - \u5199\u771f\u306f <code>USER_PHOTO_S3_BUCKET</code> \u306b\u4fdd\u5b58\u3057 URL \u3092\u4fdd\u6301\u3002 - <code>sync_users</code>\uff08\u5168\u91cf\uff09\u3068 <code>sync_single_user</code>\uff08\u5358\u4f53\uff09\u306b\u5bfe\u5fdc\u3002</p>"},{"location":"backend/tasks/","title":"app/tasks/","text":""},{"location":"backend/tasks/#_1","title":"\u6982\u8981","text":"<p>DynamoDB \u306b\u5b9a\u7fa9\u3057\u305f\u30b8\u30e7\u30d6\u3092 APScheduler \u3067\u5b9f\u884c\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\u8907\u6570\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3082\u91cd\u8907\u5b9f\u884c\u3092\u907f\u3051\u308b\u305f\u3081\u3001DDB \u3067\u5206\u6563\u30ed\u30c3\u30af\uff08\u30ea\u30fc\u30b9\uff09\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002</p>"},{"location":"backend/tasks/#_2","title":"\u4ed5\u7d44\u307f","text":"<ul> <li><code>JOBS_TABLE</code> \u304b\u3089\u6709\u52b9\u30b8\u30e7\u30d6\u3092\u30b9\u30ad\u30e3\u30f3\u3002</li> <li><code>cron_expr</code>/<code>timezone</code> \u306b\u5f93\u3063\u3066\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u767b\u9332\u3002</li> <li>\u5b9f\u884c\u524d\u306b <code>lease_expires_at</code> \u3092\u6761\u4ef6\u66f4\u65b0\u3057\u3066\u6392\u4ed6\u53d6\u5f97\u3002</li> <li>\u5b9f\u884c\u7d50\u679c\u3092 <code>last_run_at</code> / <code>last_duration_ms</code> \u306b\u8a18\u9332\u3002</li> </ul>"},{"location":"backend/tasks/#action","title":"\u4ee3\u8868\u7684\u306a action","text":"<ul> <li><code>IMPORT_TO_S3</code>: \u5916\u90e8\u30bd\u30fc\u30b9\u540c\u671f\u3002</li> <li><code>S3_TO_DDB</code>: \u57cb\u3081\u8fbc\u307f\u751f\u6210\u3002</li> <li><code>RELOAD_INDEX</code>: \u30a4\u30f3\u30e1\u30e2\u30ea\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u518d\u69cb\u7bc9\u3002</li> <li><code>SYNC_MICROSOFT_USERS</code>: Microsoft Graph \u540c\u671f\u3002</li> </ul>"},{"location":"backend/tasks/#_3","title":"\u30b8\u30e7\u30d6\u5b9a\u7fa9\u306e\u4f8b\uff08\u30a4\u30e1\u30fc\u30b8\uff09","text":"<pre><code>job_id: \"import-nightly\"\nenabled: true\ncron_expr: \"0 2 * * *\"\ntimezone: \"Asia/Tokyo\"\naction: \"IMPORT_TO_S3\"\npayload: {}\nversion: 1\nupdated_at: 1730000000\n</code></pre>"},{"location":"backend/tasks/#_4","title":"\u6ce8\u610f\u70b9","text":"<ul> <li><code>ENABLE_DDB_SCHEDULER=true</code> \u3067\u6709\u52b9\u5316\u3055\u308c\u307e\u3059\u3002</li> <li><code>RELOAD_INDEX</code> \u306f <code>init_ddb_scheduler(reload_callable=...)</code> \u304c\u5fc5\u9808\u3067\u3059\u3002</li> </ul>"},{"location":"frontend/","title":"unx-knowledge-ui","text":""},{"location":"frontend/#_1","title":"\u6982\u8981","text":"<p>UNX \u30ca\u30ec\u30c3\u30b8\u691c\u7d22/\u5bfe\u8a71\u30b7\u30b9\u30c6\u30e0\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3067\u3059\u3002React + Vite + Arco Design \u3092\u30d9\u30fc\u30b9\u306b\u3001Socket.IO \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u56de\u7b54\u3001\u7ba1\u7406\u753b\u9762 CRUD\u3001SSO\u30ed\u30b0\u30a4\u30f3\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"frontend/#_2","title":"\u4e3b\u8981\u6a5f\u80fd","text":"<ul> <li>\u30c1\u30e3\u30c3\u30c8 UI\uff08Markdown \u8868\u793a\u3001\u53c2\u7167\u8868\u793a\u3001\u7d99\u7d9a\u56de\u7b54\uff09\u3002</li> <li>\u90e8\u7f72\u30fb\u30e2\u30c7\u30eb\u9078\u629e UI \u3068\u5c65\u6b74\u306e\u4fdd\u6301\uff08sessionStorage\uff09\u3002</li> <li>\u7ba1\u7406\u753b\u9762\uff08\u90e8\u7f72/\u7ba1\u7406\u8005/\u5916\u90e8\u30b5\u30fc\u30d3\u30b9/\u63a5\u7d9a/\u30ca\u30ec\u30c3\u30b8\u30bd\u30fc\u30b9\u306a\u3069\uff09\u3002</li> <li>Cognito SSO \u9023\u643a\uff08\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7 + \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\uff09\u3002</li> <li>IP \u5236\u9650\u30c1\u30a7\u30c3\u30af\uff08\u30db\u30ef\u30a4\u30c8/\u30d6\u30e9\u30c3\u30af\u30ea\u30b9\u30c8\u5bfe\u5fdc\uff09\u3002</li> </ul>"},{"location":"frontend/#_3","title":"\u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<ul> <li>React 19 + TypeScript</li> <li>Vite</li> <li>Arco Design</li> <li>Socket.IO Client</li> <li>React Markdown + rehype-sanitize</li> </ul>"},{"location":"frontend/#_4","title":"\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0","text":"<p><code>App.tsx</code> \u304c IP \u5236\u9650 \u2192 \u8a8d\u8a3c \u2192 \u30ec\u30a4\u30a2\u30a6\u30c8\u306e\u9806\u306b\u30ac\u30fc\u30c9\u3057\u307e\u3059\u3002 - <code>/login</code>: SSO \u30ed\u30b0\u30a4\u30f3 - <code>/callback</code>: SSO \u30b3\u30fc\u30eb\u30d0\u30c3\u30af - <code>/chat</code>: \u30c1\u30e3\u30c3\u30c8 - <code>/departments</code>, <code>/admins</code>, <code>/ext-services</code>, <code>/answer-areas</code>, <code>/ext-resources</code>, <code>/ext-connections</code>, <code>/knowledge</code></p>"},{"location":"frontend/#_5","title":"\u30c1\u30e3\u30c3\u30c8\u306e\u6d41\u308c","text":"<ol> <li><code>/departments</code> \u3068 <code>/models</code> \u3092\u53d6\u5f97\u3057\u9078\u629e UI \u3092\u8868\u793a\u3002</li> <li>Socket.IO \u306b <code>chat</code> \u3092\u9001\u4fe1\u3002</li> <li><code>partial</code> \u3092\u53d7\u3051\u53d6\u308a\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u8868\u793a\u3002</li> <li><code>done</code> \u3067\u6700\u7d42\u5316\u3001\u7d99\u7d9a\u53ef\u80fd\u30bb\u30af\u30b7\u30e7\u30f3\u3092 UI \u306b\u53cd\u6620\u3002</li> <li>\u3044\u3044\u306d/\u30d0\u30c3\u30c9\u306f <code>/api/feedback/reaction</code> \u306b\u9001\u4fe1\u3002</li> </ol>"},{"location":"frontend/#_6","title":"\u8a8d\u8a3c\u306e\u6d41\u308c","text":"<ol> <li><code>/login</code> \u3067 Cognito \u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3002</li> <li><code>/callback</code> \u3067 <code>id_token</code> \u3068 <code>session_id</code> \u3092\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3078\u9001\u4fe1\u3002</li> <li><code>localStorage</code> \u3067\u30e1\u30a4\u30f3\u30a6\u30a3\u30f3\u30c9\u30a6\u3078\u901a\u77e5\u3002</li> <li>\u5fc5\u8981\u306b\u5fdc\u3058\u3066 <code>/api/auth/status</code> \u3067\u30dd\u30fc\u30ea\u30f3\u30b0\u3002</li> </ol> <p>\u203b \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u5074\u306b <code>/api/auth/callback</code> \u3068 <code>/api/auth/status</code> \u304c\u5fc5\u8981\u3067\u3059\u3002</p>"},{"location":"frontend/#ip","title":"IP \u5236\u9650","text":"<p><code>VITE_IP_RESTRICTION_ENABLED=true</code> \u306e\u5834\u5408\u306b IP \u30c1\u30a7\u30c3\u30af\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002 - <code>VITE_IP_CHECK_ENDPOINT</code> \u304c\u3042\u308c\u3070\u305d\u308c\u3092\u4f7f\u7528\u3002 - \u672a\u6307\u5b9a\u306a\u3089 <code>https://api.ipify.org</code> \u3067\u53d6\u5f97\u3002</p>"},{"location":"frontend/#_7","title":"\u74b0\u5883\u5909\u6570","text":"<ul> <li><code>VITE_API_BASE_URL</code>: API \u30d9\u30fc\u30b9 URL\uff08\u672a\u6307\u5b9a\u6642\u306f <code>https://dev.unisrv-genai-service.com</code>\uff09\u3002</li> <li><code>VITE_IP_RESTRICTION_ENABLED</code>: IP \u5236\u9650\u306e\u6709\u52b9/\u7121\u52b9\u3002</li> <li><code>VITE_IP_WHITELIST</code>: \u8a31\u53ef IP\uff08\u30ab\u30f3\u30de\u533a\u5207\u308a\u3001CIDR/\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u5bfe\u5fdc\uff09\u3002</li> <li><code>VITE_IP_BLACKLIST</code>: \u62d2\u5426 IP\u3002</li> <li><code>VITE_IP_CHECK_ENDPOINT</code>: IP \u53d6\u5f97\u7528\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3002</li> <li><code>VITE_COGNITO_CLIENT_ID</code>: Cognito Client ID\u3002</li> <li><code>VITE_COGNITO_DOMAIN</code>: Cognito \u30c9\u30e1\u30a4\u30f3\u3002</li> </ul>"},{"location":"frontend/#_8","title":"\u958b\u767a/\u30d3\u30eb\u30c9","text":"<pre><code>npm install\nnpm run dev\n</code></pre> <pre><code>npm run build\nnpm run preview\n</code></pre> <pre><code>npm run lint\n</code></pre>"},{"location":"frontend/#_9","title":"\u30e2\u30c3\u30af","text":"<p><code>mock deprecated/</code> \u306b json-server \u7528\u306e\u7c21\u6613\u30e2\u30c3\u30af\u304c\u3042\u308a\u307e\u3059\u3002</p> <pre><code>npm run mock\n</code></pre>"},{"location":"frontend/#_10","title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<ul> <li><code>src/chat</code>: Socket.IO \u3068\u30c1\u30e3\u30c3\u30c8\u72b6\u614b\u7ba1\u7406\u3002</li> <li><code>src/auth</code>: \u8a8d\u8a3c\u72b6\u614b\u3068\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u4fdd\u6301\u3002</li> <li><code>src/pages</code>: \u753b\u9762\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3002</li> <li><code>src/layout</code>: \u5171\u901a\u30ec\u30a4\u30a2\u30a6\u30c8\uff08\u30d8\u30c3\u30c0\u30fc/\u30e1\u30cb\u30e5\u30fc\uff09\u3002</li> <li><code>src/hooks</code>: fetch \u30d8\u30eb\u30d1\u30fc\u3001IP \u5236\u9650\u30d5\u30c3\u30af\u3002</li> <li><code>src/styles</code>: \u30a2\u30d7\u30ea\u5168\u4f53\u30b9\u30bf\u30a4\u30eb\u3002</li> </ul>"},{"location":"frontend/#readme","title":"README \u7d22\u5f15","text":"<ul> <li><code>src/README.md</code>: \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5168\u4f53\u306e\u69cb\u6210\u3068\u5f79\u5272\u3002</li> <li><code>src/chat/README.md</code>: \u30c1\u30e3\u30c3\u30c8\u72b6\u614b\u7ba1\u7406\u3068 Socket.IO\u3002</li> <li><code>src/auth/README.md</code>: \u8a8d\u8a3c\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3002</li> <li><code>src/pages/README.md</code>: \u753b\u9762\u4e00\u89a7\u3068\u5f79\u5272\u3002</li> <li><code>src/layout/README.md</code>: \u5171\u901a\u30ec\u30a4\u30a2\u30a6\u30c8\u3002</li> <li><code>src/hooks/README.md</code>: \u5171\u901a\u30d5\u30c3\u30af\u3068 fetch \u30d8\u30eb\u30d1\u30fc\u3002</li> </ul>"},{"location":"frontend/architecture/","title":"src/","text":""},{"location":"frontend/architecture/#_1","title":"\u6982\u8981","text":"<p>\u30a2\u30d7\u30ea\u672c\u4f53\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u3059\u3002\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u306f <code>main.tsx</code> \u3067\u3001<code>App.tsx</code> \u304c\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3068\u30ac\u30fc\u30c9\u3092\u69cb\u6210\u3057\u307e\u3059\u3002</p>"},{"location":"frontend/architecture/#_2","title":"\u4e3b\u8981\u30d5\u30a1\u30a4\u30eb","text":"<ul> <li><code>main.tsx</code>: React \u30eb\u30fc\u30c8\u306e\u8d77\u70b9\u3002</li> <li><code>App.tsx</code>: IP \u5236\u9650\u30fb\u8a8d\u8a3c\u30fb\u30ec\u30a4\u30a2\u30a6\u30c8\u306e\u30ac\u30fc\u30c9\u3001\u5404\u30da\u30fc\u30b8\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3002</li> <li><code>config.ts</code>: API \u30d9\u30fc\u30b9 URL \u3068 IP \u5236\u9650\u8a2d\u5b9a\u306e\u96c6\u7d04\u3002</li> <li><code>App.css</code>, <code>index.css</code>, <code>styles/app.css</code>: UI \u5171\u901a\u30b9\u30bf\u30a4\u30eb\u3002</li> </ul>"},{"location":"frontend/architecture/#_3","title":"\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea","text":"<ul> <li><code>auth/</code>: \u8a8d\u8a3c\u72b6\u614b\u3068\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u7ba1\u7406\u3002</li> <li><code>chat/</code>: Socket.IO \u30c1\u30e3\u30c3\u30c8\u306e\u72b6\u614b\u7ba1\u7406\u3002</li> <li><code>components/</code>: UI \u90e8\u54c1\uff08\u30a2\u30d0\u30bf\u30fc/\u30ea\u30c3\u30c1\u30c6\u30ad\u30b9\u30c8\uff09\u3002</li> <li><code>hooks/</code>: fetch \u30d8\u30eb\u30d1\u30fc\u3001IP \u5236\u9650\u30c1\u30a7\u30c3\u30af\u3002</li> <li><code>layout/</code>: \u30d8\u30c3\u30c0\u30fc/\u30e1\u30cb\u30e5\u30fc/\u30b7\u30a7\u30eb\u3002</li> <li><code>pages/</code>: \u753b\u9762\u5358\u4f4d\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3002</li> <li><code>theme/</code>: \u30c8\u30fc\u30af\u30f3 CSS\u3002</li> </ul>"},{"location":"frontend/auth/","title":"src/auth/","text":""},{"location":"frontend/auth/#_1","title":"\u6982\u8981","text":"<p>\u8a8d\u8a3c\u72b6\u614b\u3068\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3092\u4fdd\u6301\u3059\u308b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3067\u3059\u3002Cognito \u304b\u3089\u306e\u30ed\u30b0\u30a4\u30f3\u7d50\u679c\u3092\u4fdd\u5b58\u3057\u3001\u30d8\u30c3\u30c0\u30fc\u3084\u30a2\u30d0\u30bf\u30fc\u8868\u793a\u306b\u5229\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"frontend/auth/#authcontext","title":"AuthContext \u306e\u4e3b\u306a\u6a5f\u80fd","text":"<ul> <li><code>isAuthenticated</code> \u3068 <code>user</code> \u306e\u4fdd\u6301\uff08localStorage\uff09\u3002</li> <li><code>sessionId</code> \u306e\u4fdd\u6301\uff08SSO \u30dd\u30fc\u30ea\u30f3\u30b0\u7528\uff09\u3002</li> <li>\u753b\u50cf\u306e\u9045\u5ef6\u53d6\u5f97: <code>/api/users/{id}/photo/raw</code> \u3092\u53d6\u5f97\u3057 data URL \u5316\u3002</li> </ul>"},{"location":"frontend/auth/#_2","title":"\u95a2\u9023\u30da\u30fc\u30b8","text":"<ul> <li><code>pages/LoginPage.tsx</code>: Cognito \u30ed\u30b0\u30a4\u30f3\u958b\u59cb\u3002</li> <li><code>pages/AuthCallback.tsx</code>: Cognito \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u51e6\u7406\u3002</li> </ul>"},{"location":"frontend/chat/","title":"src/chat/","text":""},{"location":"frontend/chat/#_1","title":"\u6982\u8981","text":"<p>\u30c1\u30e3\u30c3\u30c8 UI \u306e\u72b6\u614b\u7ba1\u7406\u3068 Socket.IO \u901a\u4fe1\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002<code>ChatContext.tsx</code> \u304c\u4e2d\u5fc3\u3067\u3059\u3002</p>"},{"location":"frontend/chat/#chatcontext","title":"ChatContext \u306e\u4e3b\u306a\u8cac\u52d9","text":"<ul> <li>\u30e1\u30c3\u30bb\u30fc\u30b8\u5c65\u6b74\u306e\u4fdd\u6301\uff08sessionStorage\uff09\u3002</li> <li>\u90e8\u7f72/\u30e2\u30c7\u30eb\u306e\u9078\u629e\u72b6\u614b\u306e\u4fdd\u6301\u3002</li> <li>Socket.IO \u306e <code>partial</code>/<code>done</code>/<code>error</code> \u53d7\u4fe1\u51e6\u7406\u3002</li> <li>\u30bb\u30af\u30b7\u30e7\u30f3\u5206\u5272\uff08\u30ec\u30d9\u30eb\u5225\u56de\u7b54\uff09\u3068\u7d99\u7d9a\u30dc\u30bf\u30f3\u306e\u5236\u5fa1\u3002</li> </ul>"},{"location":"frontend/chat/#_2","title":"\u901a\u4fe1\u30d5\u30ed\u30fc","text":"<ul> <li><code>chat</code> \u30a4\u30d9\u30f3\u30c8: <code>{ query, dept, model }</code> \u3092\u9001\u4fe1\u3002</li> <li><code>partial</code> \u30a4\u30d9\u30f3\u30c8: \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u672c\u6587\u3092\u8ffd\u8a18\u3002</li> <li><code>done</code> \u30a4\u30d9\u30f3\u30c8: \u53c2\u7167/\u7d99\u7d9a\u60c5\u5831\u3092\u7d71\u5408\u3002</li> <li><code>continue</code> \u30a4\u30d9\u30f3\u30c8: \u7d99\u7d9a\u56de\u7b54\u3092\u53d6\u5f97\u3002</li> </ul>"},{"location":"frontend/hooks/","title":"src/hooks/","text":""},{"location":"frontend/hooks/#_1","title":"\u6982\u8981","text":"<p>\u753b\u9762\u5171\u901a\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u30d5\u30c3\u30af\u3068 fetch \u30d8\u30eb\u30d1\u30fc\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"frontend/hooks/#_2","title":"\u4e3b\u306a\u30d5\u30c3\u30af","text":"<ul> <li><code>useIpRestriction.ts</code>: IP \u30db\u30ef\u30a4\u30c8/\u30d6\u30e9\u30c3\u30af\u30ea\u30b9\u30c8\u5224\u5b9a\u3002</li> <li><code>VITE_IP_CHECK_ENDPOINT</code> \u304c\u3042\u308c\u3070\u305d\u306e API \u3092\u4f7f\u7528\u3002</li> <li>\u672a\u6307\u5b9a\u306e\u5834\u5408\u306f <code>https://api.ipify.org</code> \u3092\u4f7f\u7528\u3002</li> <li><code>useFetch.ts</code>: <code>getJSON</code> / <code>swrFetcher</code> \u306e\u7c21\u6613\u30e9\u30c3\u30d1\u30fc\u3002</li> </ul>"},{"location":"frontend/layout/","title":"src/layout/","text":""},{"location":"frontend/layout/#_1","title":"\u6982\u8981","text":"<p>\u30a2\u30d7\u30ea\u5168\u4f53\u306e\u5171\u901a\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u69cb\u6210\u3057\u307e\u3059\u3002</p>"},{"location":"frontend/layout/#_2","title":"\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8","text":"<ul> <li><code>Shell.tsx</code>: \u30d8\u30c3\u30c0\u30fc + \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc + \u30e1\u30a4\u30f3\u9818\u57df\u306e\u9aa8\u683c\u3002</li> <li><code>HeaderBar.tsx</code>: \u53f3\u4e0a\u306e\u30e6\u30fc\u30b6\u30fc\u64cd\u4f5c\u3084\u30a2\u30ab\u30a6\u30f3\u30c8\u8868\u793a\u3002</li> <li><code>AppMenu.tsx</code>: \u753b\u9762\u9077\u79fb\u7528\u306e\u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc\u3002</li> </ul>"},{"location":"frontend/pages/","title":"src/pages/","text":""},{"location":"frontend/pages/#_1","title":"\u6982\u8981","text":"<p>\u753b\u9762\u5358\u4f4d\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u7fa4\u3067\u3059\u3002<code>App.tsx</code> \u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"frontend/pages/#_2","title":"\u4e00\u89a7","text":"<ul> <li><code>ChatPage.tsx</code>: \u30e1\u30a4\u30f3\u306e\u30c1\u30e3\u30c3\u30c8 UI\u3002</li> <li><code>DepartmentsPage.tsx</code>: \u90e8\u7f72 CRUD\u3002</li> <li><code>AdminsPage.tsx</code>: \u7ba1\u7406\u8005 CRUD\u3002</li> <li><code>ExternalServicesPage.tsx</code>: \u5916\u90e8\u30b5\u30fc\u30d3\u30b9 CRUD\u3002</li> <li><code>AnswerAreasPage.tsx</code>: \u56de\u7b54\u8868\u793a\u30a8\u30ea\u30a2 CRUD\u3002</li> <li><code>ExtResourcesPage.tsx</code>: \u5916\u90e8\u30ea\u30bd\u30fc\u30b9 CRUD\u3002</li> <li><code>ExtConnectionsPage.tsx</code>: \u5916\u90e8\u63a5\u7d9a CRUD + \u30c6\u30b9\u30c8\u3002</li> <li><code>KnowledgePage.tsx</code>: \u30ca\u30ec\u30c3\u30b8\u30bd\u30fc\u30b9 CRUD\u3002</li> <li><code>LoginPage.tsx</code>: Cognito SSO \u30ed\u30b0\u30a4\u30f3\u3002</li> <li><code>AuthCallback.tsx</code>: Cognito \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3002</li> <li><code>IpRestrictedPage.tsx</code>: IP \u5236\u9650\u6642\u306e\u6848\u5185\u753b\u9762\u3002</li> </ul>"},{"location":"frontend/pages/#_3","title":"\u30c7\u30fc\u30bf\u53d6\u5f97\u306e\u7279\u5fb4","text":"<p>\u591a\u304f\u306e CRUD \u753b\u9762\u306f <code>GET /api/*</code> \u3092 <code>_page</code>/<code>_limit</code> \u4ed8\u304d\u3067\u547c\u3073\u51fa\u3057\u3001<code>X-Total-Count</code> \u3092\u7528\u3044\u3066\u30da\u30fc\u30b8\u30f3\u30b0\u3057\u307e\u3059\u3002</p>"}]}